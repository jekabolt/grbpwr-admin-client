import{j as s}from"./mui--1QQx6Xz.js";import{u as L,x as T,E as $,a7 as V,T as f,z as S}from"./index-CeC5ghbp.js";import{r as d}from"./vendor-BqCw_tH9.js";function G({fieldPrefix:r,fields:l,editMode:b=!0}){const{control:v,watch:h,setValue:i,formState:{errors:N}}=L(),{replace:p}=T({control:v,name:r}),o=h(r)||[],[u,w]=d.useState($[0].id),[j,E]=d.useState({}),x=$.find(e=>e.id===u),m=o.findIndex(e=>(e==null?void 0:e.languageId)===u),g=m>=0?m:o.length;d.useEffect(()=>{if(o.length===0){const e=$.map(t=>{const a={languageId:t.id};return l.forEach(n=>{a[n.name]=""}),a});p(e)}},[o.length,p]),d.useEffect(()=>{if(m<0&&o.length>0){const e={languageId:u};l.forEach(a=>{e[a.name]=""});const t=[...o,e];p(t)}else m>=0&&i(`${r}.${m}.languageId`,u)},[u,m,o.length,p,i,r]),d.useEffect(()=>{const e={};l.forEach(t=>{const a=`${r}.${g}.${t.name}`;e[t.name]=h(a)||""}),E(e)},[u,g,l,r,h]);const y=(e,t)=>{e.preventDefault(),l.forEach(a=>{const n=`${r}.${g}.${a.name}`,c=j[a.name];c!==void 0&&i(n,c)}),w(t)},I=(e,t)=>{E(n=>({...n,[e]:t}));const a=`${r}.${g}.${e}`;i(a,t)},C=e=>{const t=o.findIndex(a=>(a==null?void 0:a.languageId)===e);return t<0?!1:l.some(a=>{const n=h(`${r}.${t}.${a.name}`);return n&&n.trim().length>0})},F=e=>{const a=`${r}.${g}.${e}`.split(".");let n=N;for(const c of a){if(!n)return null;n=n[c]}return n==null?void 0:n.message};return s.jsxs("div",{className:"space-y-3",children:[s.jsx(V,{selectedLanguageId:u,isLanguageFilled:C,onLanguageChange:y}),s.jsx("div",{className:"space-y-4",children:l.map(e=>{const t=j[e.name]||"",a=e.placeholder||`enter ${e.label.toLowerCase()} in ${x==null?void 0:x.name}`,n=F(e.name);return e.type==="textarea"?s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:e.label}),s.jsx("textarea",{value:t,onChange:c=>I(e.name,c.target.value),placeholder:a,className:`w-full border ${n?"border-red-500":"border-text"} leading-4 bg-transparent resize-none min-h-[100px] focus:outline-none p-2`,rows:e.rows||4,readOnly:!b}),n&&s.jsx("p",{className:"text-sm font-medium text-red-500",children:n})]},e.name):s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{component:"label",children:e.label}),s.jsx("div",{className:`border-b ${n?"border-red-500":"border-textColor"}`,children:s.jsx(S,{value:t,onChange:c=>I(e.name,c.target.value),placeholder:a,className:"w-full border-none leading-4 bg-transparent",readOnly:!b})}),n&&s.jsx("p",{className:"text-sm font-medium text-red-500",children:n})]},e.name)})})]})}export{G as U};
