import{j as r}from"./mui-D9Bk7yoK.js";import{u as V,x as A,L as I,aa as S,T as N,E as D}from"./index-DP6ujRXh.js";import{r as g}from"./vendor-DljJgkTU.js";function z({fieldPrefix:s,fields:l,editMode:j=!0}){const{control:C,watch:d,setValue:i,formState:{errors:$}}=V(),{replace:p}=A({control:C,name:s}),o=d(s)||[],[u,y]=g.useState(I[0].id),[E,v]=g.useState({}),b=I.find(n=>n.id===u),m=o.findIndex(n=>(n==null?void 0:n.languageId)===u),h=m>=0?m:o.length;g.useEffect(()=>{if(o.length===0){const n=I.map(e=>{const a={languageId:e.id};return l.forEach(t=>{a[t.name]=""}),a});p(n)}},[o.length,p]),g.useEffect(()=>{if(m<0&&o.length>0){const n={languageId:u};l.forEach(a=>{n[a.name]=""});const e=[...o,n];p(e)}else m>=0&&i(`${s}.${m}.languageId`,u,{shouldDirty:!0})},[u,m,o.length,p,i,s]),g.useEffect(()=>{var c;const n=s.split(".");let e=$;for(const x of n)if(e=e==null?void 0:e[x],!e)return;if(!Array.isArray(e)||!e.length||!o.length)return;const a=e.findIndex(x=>x&&l.some(T=>x[T.name])),t=(c=o[a])==null?void 0:c.languageId;a!==-1&&typeof t=="number"&&y(t)},[$,s,l,o]),g.useEffect(()=>{const n={};l.forEach(e=>{const a=`${s}.${h}.${e.name}`;n[e.name]=d(a)||""}),v(n)},[u,h,l,s,d]);const L=(n,e)=>{n.preventDefault(),l.forEach(a=>{const t=`${s}.${h}.${a.name}`,c=E[a.name];c!==void 0&&i(t,c,{shouldDirty:!0})}),y(e)},w=(n,e)=>{v(t=>({...t,[n]:e}));const a=`${s}.${h}.${n}`;i(a,e,{shouldDirty:!0})},f=n=>{const e=o.findIndex(a=>(a==null?void 0:a.languageId)===n);return e<0?!1:l.some(a=>{const t=d(`${s}.${e}.${a.name}`);return t&&t.trim().length>0})},F=n=>{const a=`${s}.${h}.${n}`.split(".");let t=$;for(const c of a){if(!t)return null;t=t[c]}return t==null?void 0:t.message};return r.jsxs("div",{className:"space-y-3",children:[r.jsx(S,{selectedLanguageId:u,isLanguageFilled:f,onLanguageChange:L}),r.jsx("div",{className:"space-y-4",children:l.map(n=>{const e=E[n.name]||"",a=n.placeholder||`enter ${n.label.toLowerCase()} in ${b==null?void 0:b.name}`,t=F(n.name);return n.type==="textarea"?r.jsxs("div",{className:"space-y-2",children:[r.jsx(N,{component:"label",children:n.label}),r.jsx("textarea",{value:e,onChange:c=>w(n.name,c.target.value),placeholder:a,className:`w-full border ${t?"border-red-500":"border-text"} leading-4 bg-transparent resize-none min-h-[100px] focus:outline-none p-2`,rows:n.rows||4,readOnly:!j}),t&&r.jsx("p",{className:"text-sm font-medium text-red-500",children:t})]},n.name):r.jsxs("div",{className:"space-y-2",children:[r.jsx(N,{component:"label",children:n.label}),r.jsx("div",{className:`border-b ${t?"border-red-500":"border-textColor"}`,children:r.jsx(D,{value:e,onChange:c=>w(n.name,c.target.value),placeholder:a,className:"w-full border-none leading-4 bg-transparent",readOnly:!j})}),t&&r.jsx("p",{className:"text-sm font-medium text-red-500",children:t})]},n.name)})})]})}export{z as U};
