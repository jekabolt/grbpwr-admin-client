import{j as a}from"./mui-Era5zkYQ.js";import{u as F,x as k,a4 as w,a5 as O,T as N,z,a6 as A,a7 as B,c as v,a8 as U,a9 as G,aa as R,ab as D,ac as M,ad as y,ae as q}from"./index-D2NYSwrw.js";import{r as b}from"./vendor-BOSvJ31v.js";function Y({fieldPrefix:s,fields:o,editMode:c=!0}){const{control:u,watch:g,setValue:h,formState:{errors:m}}=F(),{replace:d}=k({control:u,name:s}),i=g(s)||[],[l,E]=b.useState(w[0].id),[$,C]=b.useState({}),f=w.find(e=>e.id===l),p=i.findIndex(e=>(e==null?void 0:e.languageId)===l),j=p>=0?p:i.length;b.useEffect(()=>{if(i.length===0){const e=w.map(r=>{const n={languageId:r.id};return o.forEach(t=>{n[t.name]=""}),n});d(e)}},[i.length,d]),b.useEffect(()=>{if(p<0&&i.length>0){const e={languageId:l};o.forEach(n=>{e[n.name]=""});const r=[...i,e];d(r)}else p>=0&&h(`${s}.${p}.languageId`,l)},[l,p,i.length,d,h,s]),b.useEffect(()=>{const e={};o.forEach(r=>{const n=`${s}.${j}.${r.name}`;e[r.name]=g(n)||""}),C(e)},[l,j,o,s,g]);const L=(e,r)=>{e.preventDefault(),o.forEach(n=>{const t=`${s}.${j}.${n.name}`,x=$[n.name];x!==void 0&&h(t,x)}),E(r)},I=(e,r)=>{C(t=>({...t,[e]:r}));const n=`${s}.${j}.${e}`;h(n,r)},T=e=>{const r=i.findIndex(n=>(n==null?void 0:n.languageId)===e);return r<0?!1:o.some(n=>{const t=g(`${s}.${r}.${n.name}`);return t&&t.trim().length>0})},V=e=>{const n=`${s}.${j}.${e}`.split(".");let t=m;for(const x of n){if(!t)return null;t=t[x]}return t==null?void 0:t.message};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(O,{selectedLanguageId:l,isLanguageFilled:T,onLanguageChange:L}),a.jsx("div",{className:"space-y-4",children:o.map(e=>{const r=$[e.name]||"",n=e.placeholder||`enter ${e.label.toLowerCase()} in ${f==null?void 0:f.name}`,t=V(e.name);return e.type==="textarea"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:e.label}),a.jsx("textarea",{value:r,onChange:x=>I(e.name,x.target.value),placeholder:n,className:`w-full border ${t?"border-red-500":"border-text"} leading-4 bg-transparent resize-none min-h-[100px] focus:outline-none p-2`,rows:e.rows||4,readOnly:!c}),t&&a.jsx("p",{className:"text-sm font-medium text-red-500",children:t})]},e.name):a.jsxs("div",{className:"space-y-2",children:[a.jsx(N,{component:"label",children:e.label}),a.jsx("div",{className:`border-b ${t?"border-red-500":"border-textColor"}`,children:a.jsx(z,{value:r,onChange:x=>I(e.name,x.target.value),placeholder:n,className:"w-full border-none leading-4 bg-transparent",readOnly:!c})}),t&&a.jsx("p",{className:"text-sm font-medium text-red-500",children:t})]},e.name)})})]})}function H(s){return a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:a.jsx("path",{d:"M12 10L8 6L4 10",stroke:"black",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})})}function Z({name:s,items:o,className:c,customWidth:u,fullWidth:g,renderValue:h,...m}){const[d,i]=b.useState(!1);return a.jsxs(A,{...m,open:d,onOpenChange:i,children:[a.jsx(J,{placeholder:m.placeholder,className:c,renderValue:h,value:m.value,items:o,isOpen:d,children:a.jsx(H,{})}),a.jsx(K,{fullWidth:g,customWidth:u,children:o.map(l=>a.jsx(S,{value:l.value,children:l.label},l.value))})]})}function S({children:s,className:o,ref:c,...u}){return a.jsx(y,{className:v("relative flex h-6 select-none items-center px-2.5 leading-none data-[disabled]:pointer-events-none data-[highlighted]:bg-[rgba(0,0,0,0.08)] data-[highlighted]:text-textColor data-[disabled]:opacity-30 data-[highlighted]:outline-none",o),...u,ref:c,children:a.jsx(q,{children:a.jsx(N,{children:s})})})}S.displayName=y.displayName;function J({children:s,placeholder:o,className:c,value:u,items:g,isOpen:h,renderValue:m}){let d=null;if(m&&u&&g){const i=g.find(l=>l.value===u);d=m(u,i)}return a.jsxs(B,{className:v("flex w-full items-center justify-between gap-2 border-b border-b-textColor bg-bgColor text-textBaseSize focus:outline-none focus:ring-0",c),"aria-label":o,children:[d??a.jsx(U,{placeholder:o}),a.jsx(G,{className:v("rotate-180 text-textColor",{"rotate-0":h}),children:s})]})}function K({children:s,fullWidth:o,customWidth:c}){const u=()=>{if(o)return"var(--radix-select-trigger-width)";if(c&&c>0)return`${c}px`};return a.jsx(R,{children:a.jsx(D,{className:"w-full overflow-auto bg-bgColor shadow-md z-[1500]",position:"popper",style:{width:u()},children:a.jsx(M,{className:"max-h-[300px] bg-bgColor",children:s})})})}export{Z as S,Y as U};
