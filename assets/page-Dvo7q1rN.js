import{j as e}from"./mui-8bJoa1Af.js";import{c as y,u as V,x as Z,y as K,z as J,A as Q,C as X,D,T as a,E as P,G as H,B as I,H as ee,a as A,J as se,d as re,K as ne,R as ae,P as te,O as ce,N as le,Q as oe,S as ie,V as z,W as de,p as ue,b as k,X as xe,v as me,Y as fe,Z as he}from"./index-Cqe6UZNI.js";import{r as w,L as pe,d as je}from"./vendor-DljJgkTU.js";import{S as R}from"./filter-B8x8g7tl.js";import{R as Ne,T as ve,P as ge,C as be,a as Ce}from"./index-BtK17b9m.js";const Y=w.forwardRef(({className:s,name:n,variant:r="default",...c},l)=>e.jsx("textarea",{id:n,ref:l,className:y("mb-5 min-h-56 w-full resize-none appearance-none rounded-none bg-bgColor px-4 pt-2.5 text-textBaseSize focus:outline-none",{"border-textInactiveColor":r==="secondary"},s),...c}));Y.displayName="Textarea";function Ee({loading:s,name:n,label:r,description:c,srLabel:l,maxLength:i,showCharCount:x=!1,...f}){const{control:h,trigger:p,watch:b}=V(),t=b(n)||"";function d(){p(n)}return e.jsx(Z,{control:h,name:n,render:({field:u})=>e.jsxs(K,{children:[r&&e.jsx(J,{className:l?"sr-only":"",children:r}),e.jsx(Q,{children:e.jsxs("div",{className:"relative border border-textInactiveColor",children:[e.jsx(Y,{disabled:s,...u,value:u.value||"",maxLength:i,...f,onBlur:d,onChange:u.onChange}),x&&e.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-textInactiveColor",children:[t.length,i&&`/${i}`]})]})}),c&&e.jsx(X,{children:c}),e.jsx(D,{})]})})}function we({buyer:s,isPrinting:n}){return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"buyer information:"}),e.jsx(a,{className:"flex items-center gap-2",variant:"uppercase",children:["email: ",e.jsx(a,{component:"span",className:"lowercase select-all",children:e.jsx(P,{text:(s==null?void 0:s.email)||""})})]}),e.jsxs(a,{variant:"uppercase",children:["first name: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.firstName})]}),e.jsxs(a,{variant:"uppercase",children:["last name: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.lastName})]}),e.jsxs(a,{variant:"uppercase",children:["phone: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.phone})]}),e.jsx(a,{variant:"uppercase",className:y({hidden:n}),children:["receive promo emails: ",s!=null&&s.receivePromoEmails?e.jsx(a,{component:"span",className:R.confirmed,children:"yes"}):e.jsx(a,{component:"span",className:R.denied,children:"no"})]})]})}function Ie({openElement:s,title:n,children:r,contentProps:c,className:l,gap:i="default",variant:x="default"}){const[f,h]=w.useState(!1);return e.jsxs(Ne,{open:f,onOpenChange:h,children:[e.jsx(ve,{className:"flex items-center",children:typeof s=="function"?s(f):s}),e.jsx(Se,{className:l,title:n,gap:i,variant:x,...c,children:r})]})}function Se({children:s,title:n,className:r,gap:c="default",variant:l="default",...i}){return e.jsx(ge,{children:e.jsxs(be,{side:"bottom",align:"center",className:y("relative z-20 w-full space-y-10 border border-textInactiveColor bg-bgColor px-2.5",{"space-y-16":c==="large","border-none":l==="no-borders"},r),...i,children:[n&&e.jsx(Ce,{className:y("fixed left-2 right-2 top-2.5 bg-bgColor","appearance-none border-0 outline-none focus:outline-none"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{variant:"uppercase",children:n}),e.jsx(a,{children:"[x]"})]})}),e.jsx("div",{className:"relative max-h-[50vh] overflow-y-scroll",children:e.jsx("div",{className:"sticky top-0",children:s})})]})})}function Te({orderDetails:s}){var n;return e.jsx(Ie,{variant:"default",contentProps:{align:"start",sideOffset:10},className:"p-5 bg-bgColor text-textColor",openElement:()=>e.jsx(I,{className:"border border-textInactiveColor rounded px-1 cursor-pointer",children:"i"}),children:e.jsx("div",{className:"flex flex-col gap-y-2",children:(n=s==null?void 0:s.statusHistory)==null?void 0:n.map(r=>{var c,l;return e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsxs(a,{children:[(l=(c=r.status)==null?void 0:c.replace("ORDER_STATUS_ENUM_",""))==null?void 0:l.replace("_"," "),": "]}),e.jsx(a,{children:H(r.changedAt,!0)})]},r.id)})})})}function ye({orderDetails:s,orderStatus:n,isPrinting:r}){var i,x,f;const c=ee(n),l=H((i=s==null?void 0:s.order)==null?void 0:i.placed,!0);return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between",children:[e.jsx(a,{variant:"uppercase",className:y("block",{"print:hidden":r}),children:`order id: ${(x=s==null?void 0:s.order)==null?void 0:x.id}`}),e.jsxs(a,{variant:"uppercase",className:"flex items-center gap-2",children:["order reference: ",e.jsx(P,{text:((f=s==null?void 0:s.order)==null?void 0:f.uuid)||""})]}),e.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[e.jsx(a,{variant:"uppercase",children:"status:"}),e.jsx(a,{variant:"uppercase",className:y(c),children:n}),e.jsx(Te,{orderDetails:s})]}),e.jsx(a,{variant:"uppercase",children:`placed: ${l}`})]})}const M="hidden lg:table-cell";function Oe({orderDetails:s,isPrinting:n=!1,showRefundSelection:r=!1,selectedProductIds:c=[],onToggleOrderItems:l}){var h,p,b;const{dictionary:i}=A(),x=w.useMemo(()=>[{label:"THUMBNAIL",showOnPrint:!0,accessor:t=>{var d;return e.jsx(pe,{to:`${se}/products/${(d=t.orderItem)==null?void 0:d.productId}`,target:"_blank",className:"cursor-pointer flex items-center justify-center w-24 h-full mx-auto",children:e.jsx(re,{src:t.thumbnail||"",alt:"thumbnail",aspectRatio:"1/1",fit:"contain"})})}},{label:"SKU",showOnPrint:!0,className:M,accessor:t=>t.sku},{label:"PRODUCT NAME",showOnPrint:!0,accessor:t=>{var d;return(d=t.translations)==null?void 0:d[0].name}},{label:"SIZE",showOnPrint:!1,accessor:t=>{var d,u,j;return(j=(u=(d=i==null?void 0:i.sizes)==null?void 0:d.find(E=>{var C;return E.id===((C=t.orderItem)==null?void 0:C.sizeId)}))==null?void 0:u.name)==null?void 0:j.replace("SIZE_ENUM_","")}},{label:"PRICE",showOnPrint:!1,className:M,accessor:t=>{var d,u;return`${t.aggregatedBasePrice??(t.productPrice&&((d=t.orderItem)!=null&&d.quantity)?t.productPrice*t.orderItem.quantity:0)} ${((u=s==null?void 0:s.order)==null?void 0:u.currency)||""}`}},{label:"SALE",showOnPrint:!1,className:M,accessor:t=>t.productSalePercentage},{label:"PRICE WITH SALE",showOnPrint:!0,accessor:t=>{var d;return`${t.aggregatedPriceWithSale??t.productPriceWithSale} ${((d=s==null?void 0:s.order)==null?void 0:d.currency)||""}`}},{label:"REFUNDED",showOnPrint:!0,accessor:t=>{var d;return(d=s==null?void 0:s.refundedOrderItems)!=null&&d.some(u=>u.id===t.id)?"Yes":"No"}}],[i,(h=s==null?void 0:s.order)==null?void 0:h.currency,s==null?void 0:s.refundedOrderItems]),f=w.useMemo(()=>n?x.filter(t=>t.showOnPrint):x,[x,n]);return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs("table",{className:"w-full border-collapse border-2 border-textColor min-w-max",children:[e.jsx("thead",{className:"bg-textInactiveColor h-10",children:e.jsxs("tr",{className:"border-b border-textColor",children:[r&&!n&&e.jsx("th",{className:"text-center w-10 border border-r border-textColor px-2",children:e.jsx(a,{variant:"uppercase",className:"leading-none",children:"refund"})}),f.map(t=>e.jsx("th",{className:`text-center w-auto lg:min-w-26 border border-r border-textColor px-2 ${t.className||""}`,children:e.jsx(a,{variant:"uppercase",className:"leading-none",children:t.label})},t.label))]})}),e.jsx("tbody",{children:((p=s==null?void 0:s.orderItems)==null?void 0:p.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:f.length,className:"text-center py-8",children:e.jsx(a,{variant:"uppercase",children:"no items found"})})}):(b=s==null?void 0:s.orderItems)==null?void 0:b.map((t,d)=>{var T;const u=typeof t.id=="number"?t.id:null,j=u!=null?[u]:[],E=u!=null&&((T=s==null?void 0:s.refundedOrderItems)==null?void 0:T.some(N=>N.id===u)),C=j.length>0&&j.every(N=>c.includes(N)),O=()=>{!j.length||!l||l(j)};return e.jsxs("tr",{className:"border-b border-text last:border-b-0 lg:w-24",children:[r&&!n&&e.jsx("td",{className:"border border-textColor text-center px-2 w-10",children:e.jsx("input",{type:"checkbox",checked:C,onChange:O,className:"cursor-pointer"})}),f.map(N=>{var m;const o=N.label!=="THUMBNAIL"&&N.label!=="REFUNDED";return e.jsx("td",{className:y("border border-textColor text-center px-2 w-16 lg:w-auto",N.className,E&&o&&'relative after:content-[""] after:absolute after:left-0 after:right-0 after:top-1/2 after:h-px after:bg-current',{"bg-textInactiveColor/80":(m=s.refundedOrderItems)==null?void 0:m.some(v=>v.id===u)}),children:N.label==="THUMBNAIL"?N.accessor(t):e.jsx(a,{children:N.accessor(t)})},N.label)})]},u??d)})})]})})})}function Pe({orderDetails:s,isPrinting:n}){var c,l,i,x,f,h,p,b,t,d,u,j,E,C,O,T,N,o;const r=s==null?void 0:s.payment;return e.jsxs("div",{className:y("flex flex-col gap-1",{hidden:n}),children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"payment:"}),e.jsxs(a,{variant:"uppercase",children:["status:"," ",(c=r==null?void 0:r.paymentInsert)!=null&&c.isTransactionDone?e.jsx(a,{component:"span",className:R.confirmed,children:"paid"}):e.jsx(a,{component:"span",className:R.denied,children:"unpaid"})]}),e.jsxs(a,{variant:"uppercase",children:["made at: ",ne(r==null?void 0:r.modifiedAt)]}),e.jsxs(a,{variant:"uppercase",children:["payment method:"," ",(i=(l=r==null?void 0:r.paymentInsert)==null?void 0:l.paymentMethod)==null?void 0:i.replace("PAYMENT_METHOD_NAME_ENUM_","")]}),e.jsx(a,{variant:"uppercase",children:["amount: ",((x=r==null?void 0:r.paymentInsert)==null?void 0:x.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD"||((f=r==null?void 0:r.paymentInsert)==null?void 0:f.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD_TEST"?e.jsx("span",{children:(p=(h=r==null?void 0:r.paymentInsert)==null?void 0:h.transactionAmountPaymentCurrency)==null?void 0:p.value}):e.jsx("span",{children:(t=(b=r==null?void 0:r.paymentInsert)==null?void 0:b.transactionAmount)==null?void 0:t.value})]}),((d=r==null?void 0:r.paymentInsert)==null?void 0:d.payer)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:["payer: ",e.jsx(P,{text:((u=r==null?void 0:r.paymentInsert)==null?void 0:u.payer)||""})]}),((j=r==null?void 0:r.paymentInsert)==null?void 0:j.payee)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:["payee: ",e.jsx(P,{text:((E=r==null?void 0:r.paymentInsert)==null?void 0:E.payee)||""})]}),((C=r==null?void 0:r.paymentInsert)==null?void 0:C.isTransactionDone)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:((O=r.paymentInsert)==null?void 0:O.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD_TEST"||((T=r.paymentInsert)==null?void 0:T.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD"?["client secret: ",e.jsx(P,{text:((N=r==null?void 0:r.paymentInsert)==null?void 0:N.clientSecret)||"",cutText:!0})]:["txid: ",e.jsx(P,{text:((o=r==null?void 0:r.paymentInsert)==null?void 0:o.transactionId)||"",cutText:!0})]})]})}function ke({orderDetails:s}){var r,c;const n=(r=s==null?void 0:s.promoCode)==null?void 0:r.promoCodeInsert;return n&&e.jsxs("div",{className:"flex flex-row lg:flex-col gap-2",children:[e.jsx(a,{variant:"uppercase",children:`promo applied: ${n.code} - ${(c=n.discount)==null?void 0:c.value}%`}),n.freeShipping&&e.jsx(a,{variant:"uppercase",children:"free ship"}),n.voucher&&e.jsx(a,{variant:"uppercase",children:"voucher"})]})}function Re({open:s,children:n,onOpenChange:r,onConfirm:c,onCancel:l}){const i=()=>{r(!1),l==null||l()},x=()=>{c(),r(!1)};return e.jsx(ae,{open:s,onOpenChange:r,children:e.jsxs(te,{children:[e.jsx(ce,{className:"fixed inset-0 z-20 h-screen bg-overlay"}),e.jsxs(le,{className:"fixed inset-x-2.5 top-1/2 z-50 flex h-auto w-auto -translate-y-1/2 flex-col border border-textInactiveColor bg-bgColor p-2.5 text-textColor lg:inset-x-auto lg:left-1/2 lg:min-w-80 lg:-translate-x-1/2",children:[e.jsx(oe,{className:"sr-only",children:"Confirmation"}),e.jsx(ie,{className:"sr-only",children:"Confirmation"}),n,e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(I,{type:"button",onClick:x,variant:"main",size:"lg",children:"confirm"}),e.jsx(I,{type:"button",onClick:i,variant:"main",size:"lg",children:"cancel"})]})]})]})})}function Me({orderDetails:s,open:n,selectedProductIds:r,onOpenChange:c,refundOrder:l}){const i=()=>{l()};return e.jsx(Re,{open:n,onOpenChange:c,onConfirm:i,children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-6",children:[e.jsxs(a,{variant:"uppercase",className:"font-bold whitespace-nowrap",children:["are you sure you want to ",r.length?"partial":"full"," refund this order?"]}),!r.length&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"refund reason:"}),e.jsx("div",{className:"grid grid-cols-2 justify-center gap-3 w-full ",children:z.map((x,f)=>{var h;return e.jsx(I,{type:"button",size:"lg",className:"border border-textColor uppercase",disabled:((h=s==null?void 0:s.order)==null?void 0:h.refundReason)!==x,children:x},f)})})]})]})})}function $({shipping:s}){return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(a,{variant:"uppercase",children:["street adress: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.addressLineOne})]}),e.jsxs(a,{variant:"uppercase",children:["city: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.city})]}),(s==null?void 0:s.state)&&e.jsxs(a,{variant:"uppercase",children:["state: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.state})]}),e.jsxs(a,{variant:"uppercase",children:["country: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.country})]}),e.jsxs(a,{variant:"uppercase",children:["postal code: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.postalCode})]})]})}function G({trackingNumber:s,isPrinting:n,handleTrackingNumberChange:r,saveTrackingNumber:c}){return e.jsx("div",{className:y("w-full border border-textColor",{hidden:n}),children:e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(de,{name:"trackingNumber",placeholder:"tracking number",className:"placeholder:uppercase border border-b border-transparent h-9",value:s,onChange:r}),e.jsx(I,{onClick:c,variant:"main",size:"lg",children:"+"})]})})}function Ae({isEdit:s,isPrinting:n,trackingNumber:r,orderStatus:c,orderDetails:l,toggleTrackNumber:i,handleTrackingNumberChange:x,saveTrackingNumber:f}){var h,p;return e.jsx(e.Fragment,{children:((h=l==null?void 0:l.shipment)==null?void 0:h.trackingCode)&&e.jsx("div",{className:"w-full",children:s&&!n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{isPrinting:n,trackingNumber:r,handleTrackingNumberChange:x,saveTrackingNumber:f}),e.jsx(I,{variant:"main",className:"cursor-pointer",size:"lg",onClick:i,children:"close"})]}):!n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{variant:"uppercase",children:["tracking number: ",(p=l==null?void 0:l.shipment)==null?void 0:p.trackingCode]}),c==="SHIPPED"&&e.jsx(I,{variant:"main",className:"px-1 cursor-pointer",onClick:i,children:"edit"})]})})})}function _e({orderDetails:s,isPrinting:n,orderStatus:r,isEdit:c,trackingNumber:l,toggleTrackNumber:i,handleTrackingNumberChange:x,saveTrackingNumber:f}){var u,j,E,C;const{dictionary:h}=A(),[p,b]=w.useState(!1),t=(u=s==null?void 0:s.shipping)==null?void 0:u.addressInsert,d=(j=s==null?void 0:s.billing)==null?void 0:j.addressInsert;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-4 print:hidden",children:[e.jsx(I,{onClick:()=>b(!1),variant:p?"simpleReverse":"main",className:"p-1",children:"Shipping"}),e.jsx(I,{onClick:()=>b(!0),variant:p?"main":"simpleReverse",className:"p-1",children:"Billing"})]}),p?d&&e.jsxs("div",{className:"grid gap-2 w-full",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"billing address:"}),e.jsx($,{shipping:d})]}):t&&e.jsxs("div",{className:"grid gap-2 w-full",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"shipping:"}),e.jsx($,{shipping:t})]}),e.jsxs("div",{className:"border-t-2 border-textColor",children:[e.jsx(a,{variant:"uppercase",children:`cost: ${(C=(E=s==null?void 0:s.shipment)==null?void 0:E.cost)==null?void 0:C.value} ${h==null?void 0:h.baseCurrency}`}),e.jsx("div",{className:"w-full",children:e.jsx(Ae,{isEdit:c,isPrinting:n,trackingNumber:l,orderStatus:r||"",orderDetails:s,toggleTrackNumber:i,handleTrackingNumberChange:x,saveTrackingNumber:f})})]})]})}const Ue=s=>{const{dictionary:n}=A(),r=ue(o=>o.showMessage),[c,l]=w.useState({orderDetails:void 0,dictionary:void 0,orderStatus:void 0,isLoading:!1}),[i,x]=w.useState(!1),[f,h]=w.useState(!1),[p,b]=w.useState(""),[t,d]=w.useState([]);async function u(){l(o=>({...o,isLoading:!0}));try{const o=await k.GetOrderByUUID({orderUuid:s});l(m=>{var v,g;return{...m,orderDetails:o.order,dictionary:n,orderStatus:xe(n,(g=(v=o.order)==null?void 0:v.order)==null?void 0:g.orderStatusId)}})}catch(o){const m=o instanceof Error?o.message:"Error fetching order details";r(m,"error")}finally{l(o=>({...o,isLoading:!1}))}}w.useEffect(()=>{u()},[s,n]),w.useEffect(()=>{const o=()=>x(!0),m=()=>x(!1);return window.addEventListener("beforeprint",o),window.addEventListener("afterprint",m),()=>{window.removeEventListener("beforeprint",o),window.removeEventListener("afterprint",m)}},[]);const j=()=>{var o,m;!i&&c.orderStatus==="SHIPPED"&&(h(!f),f&&b(((m=(o=c.orderDetails)==null?void 0:o.shipment)==null?void 0:m.trackingCode)||""))};function E(o){b(o.target.value)}const C=async()=>{var o,m;if(!p.trim()){h(!1);return}try{await k.SetTrackingNumber({orderUuid:(m=(o=c.orderDetails)==null?void 0:o.order)==null?void 0:m.uuid,trackingCode:p}),u(),h(!1)}catch(v){const g=v instanceof Error?v.message:"Failed to save tracking number";r(g,"error")}};async function O(){var m,v;if(window.confirm("Are you sure you want to mark this order as delivered?"))try{await k.DeliveredOrder({orderUuid:(v=(m=c.orderDetails)==null?void 0:m.order)==null?void 0:v.uuid}),u(),r("Order marked as delivered successfully","success")}catch(g){const S=g instanceof Error?g.message:"Failed to mark as delivered";r(S,"error")}}async function T(){var o,m;try{await k.RefundOrder({orderUuid:(m=(o=c.orderDetails)==null?void 0:o.order)==null?void 0:m.uuid,orderItemIds:t.length?t:[]}),u(),d([]),r("Order refunded successfully","success")}catch(v){const g=v instanceof Error?v.message:"Failed to refund order";r(g,"error")}}return{...c,isPrinting:i,isEdit:f,trackingNumber:p,selectedProductIds:t,saveTrackingNumber:C,toggleTrackNumber:j,handleTrackingNumberChange:E,markAsDelivered:O,refundOrder:T,toggleOrderItemsSelection:o=>{o.length&&d(m=>{if(o.every(S=>m.includes(S)))return m.filter(S=>!o.includes(S));const g=[...m];return o.forEach(S=>{g.includes(S)||g.push(S)}),g})}}},B=["CONFIRMED","DELIVERED","PENDING RETURN","REFUND IN PROGRESS"];function ze(){var T,N,o,m,v,g,S,_,U,F,L;const{uuid:s}=je(),{orderDetails:n,orderStatus:r,isPrinting:c,isEdit:l,trackingNumber:i,selectedProductIds:x,toggleTrackNumber:f,handleTrackingNumberChange:h,saveTrackingNumber:p,markAsDelivered:b,refundOrder:t,toggleOrderItemsSelection:d}=Ue(s||""),[u,j]=w.useState(!1),E=me({defaultValues:{refundReason:""}}),C=()=>{j(!0)},O=()=>{t()};return e.jsx(fe,{...E,children:e.jsxs("div",{className:"flex flex-col gap-4 w-full pb-16",children:[c&&e.jsx("div",{className:"self-start h-10 pt-2",children:e.jsx(he,{})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ye,{orderDetails:n,orderStatus:r,isPrinting:!0}),e.jsx(Oe,{orderDetails:n,isPrinting:c,showRefundSelection:B.includes(r||"")&&!["CONFIRMED"].includes(r||""),selectedProductIds:x,onToggleOrderItems:d}),e.jsx(a,{variant:"uppercase",className:"font-bold self-end",children:`Total: ${(N=(T=n==null?void 0:n.order)==null?void 0:T.totalPrice)==null?void 0:N.value} ${(o=n==null?void 0:n.order)==null?void 0:o.currency}`}),(r==="PARTIALLY REFUNDED"||r==="REFUNDED")&&e.jsx(a,{variant:"uppercase",className:"font-bold self-end",children:`refunded amount: ${(v=(m=n==null?void 0:n.order)==null?void 0:m.refundedAmount)==null?void 0:v.value} ${(g=n==null?void 0:n.order)==null?void 0:g.currency}`}),e.jsxs(a,{variant:"uppercase",className:"font-bold self-end",children:["cost: ",(_=(S=n==null?void 0:n.shipment)==null?void 0:S.cost)==null?void 0:_.value," ",(U=n==null?void 0:n.order)==null?void 0:U.currency]}),e.jsx("div",{className:"block self-end print:hidden",children:e.jsx(ke,{orderDetails:n})}),e.jsxs("div",{className:"flex gap-10 lg:gap-0 lg:flex-row flex-col lg:items-end lg:justify-between w-full",children:[e.jsx(Pe,{orderDetails:n,isPrinting:c}),e.jsx(_e,{orderDetails:n,isPrinting:c,orderStatus:r,isEdit:l,trackingNumber:i,toggleTrackNumber:f,handleTrackingNumberChange:h,saveTrackingNumber:p}),e.jsx(we,{buyer:(F=n==null?void 0:n.buyer)==null?void 0:F.buyerInsert,isPrinting:c})]})]}),r==="REFUNDED"&&e.jsxs("div",{className:"flex flex-col gap-2 w-full lg:w-2/5",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"refund reason:"}),e.jsx("div",{className:"flex flex-wrap gap-3 w-full lg:w-4/5",children:z.map((W,q)=>e.jsx(I,{type:"button",size:"lg",className:"border border-textColor uppercase",children:W},q))})]}),r==="CONFIRMED"&&!((L=n==null?void 0:n.shipment)!=null&&L.trackingCode)&&e.jsx("div",{className:"w-full lg:w-1/4",children:e.jsx(G,{isPrinting:c,trackingNumber:i,handleTrackingNumberChange:h,saveTrackingNumber:p})}),e.jsx("div",{className:"block print:hidden",children:e.jsx(Ee,{variant:"secondary",name:"notes",placeholder:"leave comments here",showCharCount:!0,maxLength:1500,className:"placeholder:uppercase placeholder:text-textInactiveColor"})}),r==="SHIPPED"&&e.jsx("div",{className:"fixed right-2.5 bottom-2.5 print:hidden",children:e.jsx(I,{variant:"main",size:"lg",onClick:b,children:"mark as delivered"})}),B.includes(r||"")&&e.jsx("div",{className:"fixed right-2.5 bottom-2.5 print:hidden",children:e.jsx(I,{variant:"main",size:"lg",onClick:C,children:"refund order"})}),e.jsx(Me,{orderDetails:n,open:u,selectedProductIds:x,onOpenChange:j,refundOrder:O}),e.jsx(a,{variant:"uppercase",className:"font-bold hidden print:block",children:"If you have any questions, please send an email to customercare@grbpwr.com"})]})})}export{ze as OrderDetails};
