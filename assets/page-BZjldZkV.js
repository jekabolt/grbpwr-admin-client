import{j as a,aS as N}from"./mui--1QQx6Xz.js";import{z as j,S as v,a as w,B as b,c as I,R as y,b as F}from"./index-BT0eTlOv.js";import{o as E,s as M,P as m}from"./filter-Ct7KBysK.js";import{r as d,u as P}from"./vendor-BqCw_tH9.js";import{a as R,g as D,f as O}from"./utility-H7oHWue3.js";function k({value:t,onChange:e,disabled:s=!1}){return a.jsx(j,{name:"email",type:"text",placeholder:"enter email",value:t,onChange:r=>e==null?void 0:e(r.target.value),disabled:s,className:"w-full h-10"})}function z({value:t="",onChange:e,disabled:s=!1}){const r=o=>{e&&e(o)};return a.jsx(v,{label:"Order",options:E,onChange:r,value:t,disabled:s})}function T({value:t,onChange:e,disabled:s=!1}){return a.jsx(j,{name:"orderId",type:"number",placeholder:"enter order id",value:t,onChange:r=>e==null?void 0:e(r.target.value),disabled:s,className:"w-full h-10"})}function $({value:t,onChange:e,disabled:s=!1}){var u;const{dictionary:r}=w(),o=((u=r==null?void 0:r.paymentMethods)==null?void 0:u.map(i=>({value:i.id||0,label:i.name||""})))||[];return a.jsx(v,{label:"Payment Method",options:o,onChange:e,value:t||0,disabled:s})}function G({value:t,onChange:e,disabled:s=!1}){return a.jsx(v,{label:"Status",options:M,onChange:e,value:t||"",disabled:s})}function L({onSearch:t,loading:e=!1}){const[s,r]=d.useState(""),[o,u]=d.useState(""),[i,h]=d.useState(""),[f,x]=d.useState(""),[c,p]=d.useState(""),l=()=>{if(t){const n={};s&&(n.orderFactor=s),o&&(n.paymentMethod=o),i&&(n.status=i),f&&(n.orderId=parseInt(f)),c&&(n.email=c),t(n)}};return a.jsxs("div",{className:"flex lg:flex-row flex-col gap-3 items-center",children:[a.jsx(z,{value:s,onChange:r,disabled:e}),a.jsx($,{value:o,onChange:u,disabled:e}),a.jsx(G,{value:i,onChange:h,disabled:e}),a.jsx(T,{value:f,onChange:x,disabled:e}),a.jsx(k,{value:c,onChange:p,disabled:e}),a.jsx(b,{size:"lg",onClick:l,disabled:e,children:"Search"})]})}const W=t=>[{field:"id",headerName:"Order ID",width:120},{field:"orderStatusId",headerName:"Order status",width:180,renderCell:e=>{const s=R(t,e.value);return a.jsx("div",{className:I(D(s),"w-full h-full"),children:s})}},{field:"placed",headerName:"Placed",flex:1,minWidth:180,width:250,renderCell:e=>O(e.value)},{field:"modified",headerName:"Modified",flex:1,minWidth:180,width:300,renderCell:e=>O(e.value)},{field:"totalPrice",headerName:"Total",width:180,flex:.5,minWidth:100,valueGetter:e=>`${e.value} ${t==null?void 0:t.baseCurrency}`}];function _({rows:t}){const{dictionary:e}=w(),s=P(),r=o=>{s(`${y.orders}/${o.row.uuid}`)};return console.log("rows",t),a.jsx("div",{className:"w-full border-2 border-text",children:a.jsx(N,{rows:t,columns:W(e),rowSelection:!1,pageSizeOptions:[],onRowClick:r,hideFooterPagination:!0,hideFooter:!0})})}function Z(){const[t,e]=d.useState([]),[s,r]=d.useState(!1),[o,u]=d.useState(0),[i,h]=d.useState(!0),[f,x]=d.useState({});d.useEffect(()=>{c()},[]);const c=async(l={},n=!1)=>{n||(x(l),u(0)),r(!0);try{const g={status:l.status||void 0,paymentMethod:l.paymentMethod||void 0,email:l.email||void 0,orderId:l.orderId||void 0,limit:l.limit||m,offset:n?o+m:0,orderFactor:l.orderFactor||"ORDER_FACTOR_DESC"},S=await F.ListOrders(g);e(n?C=>[...C,...S.orders||[]]:S.orders||[]),h((S.orders||[]).length===(l.limit||m))}finally{r(!1)}},p=async()=>{const l=o+m;u(l),await c(f,!0)};return a.jsxs("div",{className:"flex flex-col pb-10 gap-5",children:[a.jsx(L,{onSearch:c,loading:s}),a.jsx(_,{rows:t}),a.jsx(b,{className:"lg:self-start",size:"lg",onClick:p,disabled:!i,children:"load more"})]})}export{Z as OrdersCatalog};
