import{j as c}from"./mui-DmsMUjzh.js";import{u as S,w as B,L as E,T,hx as V,K as G}from"./index-eR3e49oY.js";import{r as g}from"./vendor-DljJgkTU.js";function W({label:j,fieldPrefix:s,fieldName:r}){const{control:v,watch:h,setValue:d,formState:{errors:f}}=S(),{replace:p}=B({control:v,name:s}),a=h(s)||[],[u,w]=g.useState(E[0].id),[i,C]=g.useState(""),m=E.find(n=>n.id===u),l=a.findIndex(n=>(n==null?void 0:n.languageId)===u),I=l>=0?l:a.length,$=`${s}.${I}.${r}`;g.useEffect(()=>{if(a.length===0){const n=E.map(t=>({languageId:t.id,[r]:""}));p(n)}},[a.length,p]),g.useEffect(()=>{if(l<0&&a.length>0){const n={languageId:u,[r]:""},t=[...a,n];p(t)}else l>=0&&d(`${s}.${l}.languageId`,u,{shouldDirty:!0})},[u,l,a.length,p,d,s]),g.useEffect(()=>{const n=`${s}.${I}.${r}`,t=h(n)||"";C(t)},[u,I,s,r,h]),g.useEffect(()=>{var L;const n=s.split(".");let t=f;for(const x of n)if(t=t==null?void 0:t[x],!t)return;if(!Array.isArray(t)||!t.length||!a.length)return;const e=t.findIndex(x=>x&&x[r]),o=(L=a[e])==null?void 0:L.languageId;e!==-1&&typeof o=="number"&&w(o)},[f,s,r,a]);const F=(n,t)=>{n.preventDefault(),i!==void 0&&d($,i,{shouldDirty:!0}),w(t)},b=n=>{C(n),d($,n,{shouldDirty:!0})},A=()=>{i!==void 0&&d($,i,{shouldDirty:!0})},D=n=>{const t=a.findIndex(o=>(o==null?void 0:o.languageId)===n);if(t<0)return!1;const e=h(`${s}.${t}.${r}`);return e&&e.trim().length>0},y=(()=>{const t=`${s}.${I}.${r}`.split(".");let e=f;for(const o of t){if(!e)return null;e=e[o]}return e==null?void 0:e.message})();return c.jsxs("div",{className:"space-y-3",children:[c.jsx(T,{children:j}),c.jsx(V,{selectedLanguageId:u,isLanguageFilled:D,onLanguageChange:F,showRedBorderForUnfilled:!0}),c.jsx("div",{className:`border-b ${y?"border-red-500":"border-textColor"}`,children:c.jsx(G,{name:$,value:i,onChange:n=>b(n.target.value),onBlur:A,placeholder:`enter ${j.toLowerCase()} in ${m==null?void 0:m.name}`,className:"w-full border-none leading-4 bg-transparent"})}),y&&c.jsx(T,{className:"text-red-500",children:y})]})}export{W as T};
