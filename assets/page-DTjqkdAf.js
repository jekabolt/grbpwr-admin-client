import{j as e}from"./mui-DmsMUjzh.js";import{r as E,L as W,d as K,c as Z}from"./vendor-DljJgkTU.js";import{T as a,C as P,c as y,p as z,u as J,x as Q,b as R,y as Y,B as I,z as X,a as G,A as D,d as ee,D as se,R as ne,P as re,O as ae,E as te,G as ce,H as le,J as oe,K as ie,N as de,v as ue,Q as me,S as xe}from"./index-DoWTtBOW.js";import{S as k}from"./filter-BdRRXWa8.js";import{R as fe,T as pe,P as he,C as je,a as Ne}from"./index-HbMQIQ2r.js";function ve({buyer:s,isPrinting:r}){return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"buyer information:"}),e.jsx(a,{className:"flex items-center gap-2",variant:"uppercase",children:["email: ",e.jsx(a,{component:"span",className:"lowercase select-all",children:e.jsx(P,{text:(s==null?void 0:s.email)||""})})]}),e.jsxs(a,{variant:"uppercase",children:["first name: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.firstName})]}),e.jsxs(a,{variant:"uppercase",children:["last name: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.lastName})]}),e.jsxs(a,{variant:"uppercase",children:["phone: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.phone})]}),e.jsx(a,{variant:"uppercase",className:y({hidden:r}),children:["receive promo emails: ",s!=null&&s.receivePromoEmails?e.jsx(a,{component:"span",className:k.confirmed,children:"yes"}):e.jsx(a,{component:"span",className:k.denied,children:"no"})]})]})}function ge({orderDetails:s}){var l;const{showMessage:r}=z(),{setValue:n}=J();E.useEffect(()=>{var d;n("notes",((d=s==null?void 0:s.order)==null?void 0:d.orderComment)||"")},[(l=s==null?void 0:s.order)==null?void 0:l.orderComment,n]);async function c(d){var x;if((x=s==null?void 0:s.order)!=null&&x.uuid)try{await R.AddOrderComment({orderUuid:s.order.uuid,comment:d}),r("Comment added successfully","success")}catch(f){const p=f instanceof Error?f.message:"Failed to leave comment";r(p,"error")}}return e.jsx(Q,{variant:"secondary",name:"notes",placeholder:"leave comments here",showCharCount:!0,maxLength:1500,upsertButton:!0,onUpsert:c,className:"placeholder:uppercase placeholder:text-textInactiveColor"})}function be({openElement:s,title:r,children:n,contentProps:c,className:l,gap:d="default",variant:x="default"}){const[f,p]=E.useState(!1);return e.jsxs(fe,{open:f,onOpenChange:p,children:[e.jsx(pe,{className:"flex items-center",children:typeof s=="function"?s(f):s}),e.jsx(Ce,{className:l,title:r,gap:d,variant:x,...c,children:n})]})}function Ce({children:s,title:r,className:n,gap:c="default",variant:l="default",...d}){return e.jsx(he,{children:e.jsxs(je,{side:"bottom",align:"center",className:y("relative z-20 w-full space-y-10 border border-textInactiveColor bg-bgColor px-2.5",{"space-y-16":c==="large","border-none":l==="no-borders"},n),...d,children:[r&&e.jsx(Ne,{className:y("fixed left-2 right-2 top-2.5 bg-bgColor","appearance-none border-0 outline-none focus:outline-none"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{variant:"uppercase",children:r}),e.jsx(a,{children:"[x]"})]})}),e.jsx("div",{className:"relative max-h-[50vh] overflow-y-scroll",children:e.jsx("div",{className:"sticky top-0",children:s})})]})})}function Ee({orderDetails:s}){var r;return e.jsx(be,{variant:"default",contentProps:{align:"start",sideOffset:10},className:"p-5 bg-bgColor text-textColor",openElement:()=>e.jsx(I,{className:"border border-textInactiveColor rounded px-1 cursor-pointer",children:"i"}),children:e.jsx("div",{className:"flex flex-col gap-y-2",children:(r=s==null?void 0:s.statusHistory)==null?void 0:r.map(n=>{var c,l;return e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsxs(a,{children:[(l=(c=n.status)==null?void 0:c.replace("ORDER_STATUS_ENUM_",""))==null?void 0:l.replace("_"," "),": "]}),e.jsx(a,{children:Y(n.changedAt,!0)})]},n.id)})})})}function we({orderDetails:s,orderStatus:r,isPrinting:n}){var d,x,f;const c=X(r),l=Y((d=s==null?void 0:s.order)==null?void 0:d.placed,!0);return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between",children:[e.jsx(a,{variant:"uppercase",className:y("block",{"print:hidden":n}),children:`order id: ${(x=s==null?void 0:s.order)==null?void 0:x.id}`}),e.jsxs(a,{variant:"uppercase",className:"flex items-center gap-2",children:["order reference: ",e.jsx(P,{text:((f=s==null?void 0:s.order)==null?void 0:f.uuid)||""})]}),e.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[e.jsx(a,{variant:"uppercase",children:"status:"}),e.jsx(a,{variant:"uppercase",className:y(c),children:r}),e.jsx(Ee,{orderDetails:s})]}),e.jsx(a,{variant:"uppercase",children:`placed: ${l}`})]})}const M="hidden lg:table-cell";function Ie({orderDetails:s,isPrinting:r=!1,showRefundSelection:n=!1,selectedProductIds:c=[],onToggleOrderItems:l}){var j;const{dictionary:d}=G(),x=E.useMemo(()=>{var u;const t=[];return(u=s==null?void 0:s.orderItems)==null||u.forEach(m=>{var v;const o=Math.max(1,((v=m.orderItem)==null?void 0:v.quantity)??1);for(let N=0;N<o;N++)t.push({item:m,totalUnits:o})}),t},[s==null?void 0:s.orderItems]),f=E.useMemo(()=>[{label:"THUMBNAIL",showOnPrint:!0,className:"print:!w-24 print:min-w-0 print:overflow-hidden print:max-w-24",accessor:({item:t})=>{var u;return e.jsx(W,{to:`${D}/products/${(u=t.orderItem)==null?void 0:u.productId}`,target:"_blank",className:"cursor-pointer flex items-center justify-center w-24 max-w-full h-full mx-auto overflow-hidden print:block print:max-h-24",children:e.jsx(ee,{src:t.thumbnail||"",alt:"thumbnail",aspectRatio:"1/1",fit:"contain"})})}},{label:"SKU",showOnPrint:!0,className:M,accessor:({item:t})=>t.sku},{label:"PRODUCT NAME",showOnPrint:!0,accessor:({item:t})=>{var u;return(u=t.translations)==null?void 0:u[0].name}},{label:"SIZE",showOnPrint:!1,accessor:({item:t})=>{var u,m,o;return(o=(m=(u=d==null?void 0:d.sizes)==null?void 0:u.find(v=>{var N;return v.id===((N=t.orderItem)==null?void 0:N.sizeId)}))==null?void 0:m.name)==null?void 0:o.replace("SIZE_ENUM_","")}},{label:"PRICE",showOnPrint:!1,className:M,accessor:({item:t,totalUnits:u})=>{var N;const m=t.aggregatedBasePrice,o=t.productPrice;return`${m!=null?(typeof m=="number"?m:Number(m))/u:o!=null?typeof o=="number"?o:Number(o):0} ${((N=s==null?void 0:s.order)==null?void 0:N.currency)||""}`}},{label:"SALE",showOnPrint:!1,className:M,accessor:({item:t})=>t.productSalePercentage},{label:"PRICE WITH SALE",showOnPrint:!0,accessor:({item:t,totalUnits:u})=>{var N;const m=t.aggregatedPriceWithSale,o=t.productPriceWithSale;return`${m!=null?(typeof m=="number"?m:Number(m))/u:o!=null?typeof o=="number"?o:Number(o):0} ${((N=s==null?void 0:s.order)==null?void 0:N.currency)||""}`}},{label:"REFUNDED",showOnPrint:!0,accessor:({item:t})=>{var u;return(u=s==null?void 0:s.refundedOrderItems)!=null&&u.some(m=>m.id===t.id)?"Yes":"No"}}],[d,(j=s==null?void 0:s.order)==null?void 0:j.currency,s==null?void 0:s.refundedOrderItems]),p=E.useMemo(()=>r?f.filter(t=>t.showOnPrint):f,[f,r]);return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs("table",{className:"w-full border-collapse border-2 border-textColor min-w-max print:border-separate print:border-spacing-0 print:[border:1px_solid_currentColor]",children:[e.jsx("thead",{className:"bg-textInactiveColor h-10",children:e.jsxs("tr",{className:"border-b border-textColor",children:[n&&!r&&e.jsx("th",{className:"text-center w-10 border border-r border-textColor px-2",children:e.jsx(a,{variant:"uppercase",className:"leading-none",children:"refund"})}),p.map(t=>e.jsx("th",{className:y("text-center w-auto lg:min-w-26 border border-r border-textColor px-2","print:[border:1px_solid_currentColor]",t.className),children:e.jsx(a,{variant:"uppercase",className:"leading-none",children:t.label})},t.label))]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:p.length+(n&&!r?1:0),className:"text-center py-8",children:e.jsx(a,{variant:"uppercase",children:"no items found"})})}):x.map((t,u)=>{var S;const{item:m}=t,o=typeof m.id=="number"?m.id:null,v=o!=null?[o]:[],N=o!=null&&((S=s==null?void 0:s.refundedOrderItems)==null?void 0:S.some(g=>g.id===o)),O=v.length>0&&v.every(g=>c.includes(g)),T=()=>{!v.length||!l||l(v)};return e.jsxs("tr",{className:"border-b border-text last:border-b-0 lg:w-24",children:[n&&!r&&e.jsx("td",{className:"border border-textColor text-center px-2 w-10",children:e.jsx("input",{type:"checkbox",checked:O,onChange:T,className:"cursor-pointer"})}),p.map(g=>{var h;const i=g.label!=="THUMBNAIL"&&g.label!=="REFUNDED";return e.jsx("td",{className:y("border border-textColor text-center px-2 w-16 lg:w-auto","print:[border:1px_solid_currentColor]",g.className,N&&i&&'relative after:content-[""] after:absolute after:left-0 after:right-0 after:top-1/2 after:h-px after:bg-current',{"bg-textInactiveColor/80":(h=s==null?void 0:s.refundedOrderItems)==null?void 0:h.some(b=>b.id===o)}),children:g.label==="THUMBNAIL"?g.accessor(t):e.jsx(a,{children:g.accessor(t)})},g.label)})]},o!=null?`${o}-${u}`:u)})})]})})})}function Se({orderDetails:s,isPrinting:r}){var c,l,d,x,f,p,j,t,u,m,o,v,N,O,T,S,g,i;const n=s==null?void 0:s.payment;return e.jsxs("div",{className:y("flex flex-col gap-1",{hidden:r}),children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"payment:"}),e.jsxs(a,{variant:"uppercase",children:["status:"," ",(c=n==null?void 0:n.paymentInsert)!=null&&c.isTransactionDone?e.jsx(a,{component:"span",className:k.confirmed,children:"paid"}):e.jsx(a,{component:"span",className:k.denied,children:"unpaid"})]}),e.jsxs(a,{variant:"uppercase",children:["made at: ",se(n==null?void 0:n.modifiedAt)]}),e.jsxs(a,{variant:"uppercase",children:["payment method:"," ",(d=(l=n==null?void 0:n.paymentInsert)==null?void 0:l.paymentMethod)==null?void 0:d.replace("PAYMENT_METHOD_NAME_ENUM_","")]}),e.jsx(a,{variant:"uppercase",children:["amount: ",((x=n==null?void 0:n.paymentInsert)==null?void 0:x.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD"||((f=n==null?void 0:n.paymentInsert)==null?void 0:f.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD_TEST"?e.jsx("span",{children:(j=(p=n==null?void 0:n.paymentInsert)==null?void 0:p.transactionAmountPaymentCurrency)==null?void 0:j.value}):e.jsx("span",{children:(u=(t=n==null?void 0:n.paymentInsert)==null?void 0:t.transactionAmount)==null?void 0:u.value})]}),((m=n==null?void 0:n.paymentInsert)==null?void 0:m.payer)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:["payer: ",e.jsx(P,{text:((o=n==null?void 0:n.paymentInsert)==null?void 0:o.payer)||""})]}),((v=n==null?void 0:n.paymentInsert)==null?void 0:v.payee)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:["payee: ",e.jsx(P,{text:((N=n==null?void 0:n.paymentInsert)==null?void 0:N.payee)||""})]}),((O=n==null?void 0:n.paymentInsert)==null?void 0:O.isTransactionDone)&&e.jsx(a,{variant:"uppercase",className:"flex items-center gap-2",children:((T=n.paymentInsert)==null?void 0:T.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD_TEST"||((S=n.paymentInsert)==null?void 0:S.paymentMethod)==="PAYMENT_METHOD_NAME_ENUM_CARD"?["client secret: ",e.jsx(P,{text:((g=n==null?void 0:n.paymentInsert)==null?void 0:g.clientSecret)||"",cutText:!0})]:["txid: ",e.jsx(P,{text:((i=n==null?void 0:n.paymentInsert)==null?void 0:i.transactionId)||"",cutText:!0})]})]})}function ye({orderDetails:s}){var n,c;const r=(n=s==null?void 0:s.promoCode)==null?void 0:n.promoCodeInsert;return r&&e.jsxs("div",{className:"flex flex-row lg:flex-col gap-2",children:[e.jsx(a,{variant:"uppercase",children:`promo applied: ${r.code} - ${(c=r.discount)==null?void 0:c.value}%`}),r.freeShipping&&e.jsx(a,{variant:"uppercase",children:"free ship"}),r.voucher&&e.jsx(a,{variant:"uppercase",children:"voucher"})]})}function Oe({open:s,children:r,onOpenChange:n,onConfirm:c,onCancel:l,confirmDisabled:d}){const x=()=>{n(!1),l==null||l()},f=()=>{c(),n(!1)};return e.jsx(ne,{open:s,onOpenChange:n,children:e.jsxs(re,{children:[e.jsx(ae,{className:"fixed inset-0 z-20 h-screen bg-overlay"}),e.jsxs(te,{className:"fixed inset-x-2.5 top-1/2 z-50 flex h-auto w-auto -translate-y-1/2 flex-col border border-textInactiveColor bg-bgColor p-2.5 text-textColor lg:inset-x-auto lg:left-1/2 lg:min-w-80 lg:-translate-x-1/2",children:[e.jsx(ce,{className:"sr-only",children:"Confirmation"}),e.jsx(le,{className:"sr-only",children:"Confirmation"}),r,e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(I,{type:"button",onClick:f,variant:"main",size:"lg",disabled:d,children:"confirm"}),e.jsx(I,{type:"button",onClick:x,variant:"main",size:"lg",children:"cancel"})]})]})]})})}function Te({orderDetails:s,open:r,selectedProductIds:n,onOpenChange:c,refundOrder:l}){var u;const d=!n.length,x=((u=s==null?void 0:s.order)==null?void 0:u.refundReason)??"",[f,p]=E.useState("");E.useEffect(()=>{p(r?x:"")},[r,x]);const j=()=>{l(d?f:void 0)},t=!d||f.length>0;return e.jsx(Oe,{open:r,onOpenChange:c,onConfirm:j,confirmDisabled:!t,children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-6",children:[e.jsxs(a,{variant:"uppercase",className:"font-bold whitespace-nowrap",children:["are you sure you want to ",n.length?"partial":"full"," refund this order?"]}),d&&e.jsxs("div",{className:"flex flex-col gap-2",children:[x&&e.jsxs(a,{variant:"uppercase",className:"font-bold",children:["current refund reason: ",x]}),e.jsx(a,{variant:"uppercase",className:"font-bold",children:x?"change refund reason:":"refund reason:"}),e.jsx("div",{className:"grid grid-cols-2 justify-center gap-3 w-full ",children:oe.map((m,o)=>e.jsx(I,{type:"button",size:"lg",className:y("border border-textColor uppercase",{"bg-textColor text-bgColor":f===m}),onClick:()=>p(m),children:m},o))})]})]})})}function B({shipping:s}){return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(a,{variant:"uppercase",children:["street adress: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.addressLineOne})]}),e.jsxs(a,{variant:"uppercase",children:["city: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.city})]}),(s==null?void 0:s.state)&&e.jsxs(a,{variant:"uppercase",children:["state: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.state})]}),e.jsxs(a,{variant:"uppercase",children:["country: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.country})]}),e.jsxs(a,{variant:"uppercase",children:["postal code: ",e.jsx("span",{className:"select-all",children:s==null?void 0:s.postalCode})]})]})}function q({trackingNumber:s,isPrinting:r,handleTrackingNumberChange:n,saveTrackingNumber:c}){return e.jsx("div",{className:y("w-full border border-textColor",{hidden:r}),children:e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(ie,{name:"trackingNumber",placeholder:"tracking number",className:"placeholder:uppercase border border-b border-transparent h-9",value:s,onChange:n}),e.jsx(I,{onClick:c,variant:"main",size:"lg",children:"+"})]})})}function Pe({isEdit:s,isPrinting:r,trackingNumber:n,orderStatus:c,orderDetails:l,toggleTrackNumber:d,handleTrackingNumberChange:x,saveTrackingNumber:f}){var p,j;return e.jsx(e.Fragment,{children:((p=l==null?void 0:l.shipment)==null?void 0:p.trackingCode)&&e.jsx("div",{className:"w-full",children:s&&!r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{isPrinting:r,trackingNumber:n,handleTrackingNumberChange:x,saveTrackingNumber:f}),e.jsx(I,{variant:"main",className:"cursor-pointer",size:"lg",onClick:d,children:"close"})]}):!r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{variant:"uppercase",children:["tracking number: ",(j=l==null?void 0:l.shipment)==null?void 0:j.trackingCode]}),c==="SHIPPED"&&e.jsx(I,{variant:"main",className:"px-1 cursor-pointer",onClick:d,children:"edit"})]})})})}function Re({orderDetails:s,isPrinting:r,orderStatus:n,isEdit:c,trackingNumber:l,toggleTrackNumber:d,handleTrackingNumberChange:x,saveTrackingNumber:f}){var m,o;const[p,j]=E.useState(!1),t=(m=s==null?void 0:s.shipping)==null?void 0:m.addressInsert,u=(o=s==null?void 0:s.billing)==null?void 0:o.addressInsert;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex gap-2 mb-4 print:hidden",children:[e.jsx(I,{onClick:()=>j(!1),variant:p?"simpleReverse":"main",className:"p-1",children:"Shipping"}),e.jsx(I,{onClick:()=>j(!0),variant:p?"main":"simpleReverse",className:"p-1",children:"Billing"})]}),p?u&&e.jsxs("div",{className:"grid gap-2 w-full",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"billing address:"}),e.jsx(B,{shipping:u})]}):t&&e.jsxs("div",{className:"grid gap-2 w-full",children:[e.jsx(a,{variant:"uppercase",className:"font-bold",children:"shipping:"}),e.jsx(B,{shipping:t})]}),e.jsx("div",{className:"w-full",children:e.jsx(Pe,{isEdit:c,isPrinting:r,trackingNumber:l,orderStatus:n||"",orderDetails:s,toggleTrackNumber:d,handleTrackingNumberChange:x,saveTrackingNumber:f})})]})}const ke=s=>{const{dictionary:r}=G(),n=z(i=>i.showMessage),[c,l]=E.useState({orderDetails:void 0,dictionary:void 0,orderStatus:void 0,isLoading:!1}),[d,x]=E.useState(!1),[f,p]=E.useState(!1),[j,t]=E.useState(""),[u,m]=E.useState([]);async function o(){l(i=>({...i,isLoading:!0}));try{const i=await R.GetOrderByUUID({orderUuid:s});l(h=>{var b,C;return{...h,orderDetails:i.order,dictionary:r,orderStatus:de(r,(C=(b=i.order)==null?void 0:b.order)==null?void 0:C.orderStatusId)}})}catch(i){const h=i instanceof Error?i.message:"Error fetching order details";n(h,"error")}finally{l(i=>({...i,isLoading:!1}))}}E.useEffect(()=>{o()},[s,r]),E.useEffect(()=>{const i=()=>x(!0),h=()=>x(!1);return window.addEventListener("beforeprint",i),window.addEventListener("afterprint",h),()=>{window.removeEventListener("beforeprint",i),window.removeEventListener("afterprint",h)}},[]);const v=()=>{var i,h;!d&&c.orderStatus==="SHIPPED"&&(p(!f),f&&t(((h=(i=c.orderDetails)==null?void 0:i.shipment)==null?void 0:h.trackingCode)||""))};function N(i){t(i.target.value)}const O=async()=>{var i,h;if(!j.trim()){p(!1);return}try{await R.SetTrackingNumber({orderUuid:(h=(i=c.orderDetails)==null?void 0:i.order)==null?void 0:h.uuid,trackingCode:j}),o(),p(!1)}catch(b){const C=b instanceof Error?b.message:"Failed to save tracking number";n(C,"error")}};async function T(){var h,b;if(window.confirm("Are you sure you want to mark this order as delivered?"))try{await R.DeliveredOrder({orderUuid:(b=(h=c.orderDetails)==null?void 0:h.order)==null?void 0:b.uuid}),o(),n("Order marked as delivered successfully","success")}catch(C){const w=C instanceof Error?C.message:"Failed to mark as delivered";n(w,"error")}}async function S(i){var h,b;try{await R.RefundOrder({orderUuid:(b=(h=c.orderDetails)==null?void 0:h.order)==null?void 0:b.uuid,orderItemIds:u.length?u:[],reason:i}),o(),m([]),n("Order refunded successfully","success")}catch(C){const w=C instanceof Error?C.message:"Failed to refund order";n(w,"error")}}return{...c,isPrinting:d,isEdit:f,trackingNumber:j,selectedProductIds:u,saveTrackingNumber:O,toggleTrackNumber:v,handleTrackingNumberChange:N,markAsDelivered:T,refundOrder:S,toggleOrderItemsSelection:i=>{i.length&&m(h=>{if(i.every(w=>h.includes(w)))return h.filter(w=>!i.includes(w));const C=[...h];return i.forEach(w=>{C.includes(w)||C.push(w)}),C})}}},H=["CONFIRMED","DELIVERED","PENDING RETURN","REFUND IN PROGRESS"];function Fe(){var S,g,i,h,b,C,w,_,A,U,L,F,$;const{uuid:s}=K(),{orderDetails:r,orderStatus:n,isPrinting:c,isEdit:l,trackingNumber:d,selectedProductIds:x,toggleTrackNumber:f,handleTrackingNumberChange:p,saveTrackingNumber:j,markAsDelivered:t,refundOrder:u,toggleOrderItemsSelection:m}=ke(s||""),[o,v]=E.useState(!1),N=ue({defaultValues:{refundReason:"",notes:""}}),O=()=>{v(!0)},T=V=>{u(V)};return e.jsxs(me,{...N,children:[e.jsxs("div",{className:"flex flex-col gap-4 w-full pb-16",children:[e.jsx("div",{className:"self-start h-10 print:block hidden",children:e.jsx(xe,{})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(we,{orderDetails:r,orderStatus:n,isPrinting:!0}),e.jsx(Ie,{orderDetails:r,isPrinting:c,showRefundSelection:H.includes(n||"")&&!["CONFIRMED"].includes(n||""),selectedProductIds:x,onToggleOrderItems:m}),e.jsx(a,{variant:"uppercase",className:"font-bold self-end",children:`Total: ${(g=(S=r==null?void 0:r.order)==null?void 0:S.totalPrice)==null?void 0:g.value} ${(i=r==null?void 0:r.order)==null?void 0:i.currency}`}),(n==="PARTIALLY REFUNDED"||n==="REFUNDED")&&e.jsx(a,{variant:"uppercase",className:"font-bold self-end",children:`refunded amount: ${(b=(h=r==null?void 0:r.order)==null?void 0:h.refundedAmount)==null?void 0:b.value} ${(C=r==null?void 0:r.order)==null?void 0:C.currency}`}),e.jsxs(a,{variant:"uppercase",className:"font-bold self-end",children:["shipping cost: ",(_=(w=r==null?void 0:r.shipment)==null?void 0:w.cost)==null?void 0:_.value," ",(A=r==null?void 0:r.order)==null?void 0:A.currency]}),e.jsx("div",{className:"block self-end print:hidden",children:e.jsx(ye,{orderDetails:r})}),((U=r==null?void 0:r.order)==null?void 0:U.refundReason)&&e.jsxs(a,{variant:"uppercase",className:"font-bold self-end",children:["refund reason: ",(L=r==null?void 0:r.order)==null?void 0:L.refundReason]}),e.jsxs("div",{className:"flex gap-10 lg:gap-0 lg:flex-row flex-col lg:items-end lg:justify-between w-full",children:[e.jsx(Se,{orderDetails:r,isPrinting:c}),e.jsx(Re,{orderDetails:r,isPrinting:c,orderStatus:n,isEdit:l,trackingNumber:d,toggleTrackNumber:f,handleTrackingNumberChange:p,saveTrackingNumber:j}),e.jsx(ve,{buyer:(F=r==null?void 0:r.buyer)==null?void 0:F.buyerInsert,isPrinting:c})]})]}),n==="CONFIRMED"&&!(($=r==null?void 0:r.shipment)!=null&&$.trackingCode)&&e.jsx("div",{className:"w-full lg:w-1/4",children:e.jsx(q,{isPrinting:c,trackingNumber:d,handleTrackingNumberChange:p,saveTrackingNumber:j})}),e.jsx("div",{className:"block print:hidden",children:e.jsx(ge,{orderDetails:r})}),n==="SHIPPED"&&e.jsx("div",{className:"fixed right-2.5 bottom-2.5 print:hidden",children:e.jsx(I,{variant:"main",size:"lg",onClick:t,children:"mark as delivered"})}),H.includes(n||"")&&e.jsx("div",{className:"fixed right-2.5 bottom-2.5 print:hidden",children:e.jsx(I,{variant:"main",size:"lg",onClick:O,children:"refund order"})}),e.jsx(Te,{orderDetails:r,open:o,selectedProductIds:x,onOpenChange:v,refundOrder:T})]}),Z.createPortal(e.jsx(a,{variant:"uppercase",className:"font-bold hidden print:block print:absolute print:bottom-0 print:inset-x-0",children:"If you have any questions, please send an email to customercare@grbpwr.com"}),document.body)]})}export{Fe as OrderDetails};
