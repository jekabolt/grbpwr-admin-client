import{j as c}from"./mui-DmsMUjzh.js";import{u as S,v as B,L as y,T,hv as V,J as G}from"./index-C2EAb9Pf.js";import{r as g}from"./vendor-DljJgkTU.js";function W({label:E,fieldPrefix:s,fieldName:r}){const{control:w,watch:h,setValue:d,formState:{errors:m}}=S(),{replace:p}=B({control:w,name:s}),a=h(s)||[],[u,j]=g.useState(y[0].id),[i,C]=g.useState(""),x=y.find(n=>n.id===u),l=a.findIndex(n=>(n==null?void 0:n.languageId)===u),I=l>=0?l:a.length,$=`${s}.${I}.${r}`;g.useEffect(()=>{if(a.length===0){const n=y.map(t=>({languageId:t.id,[r]:""}));p(n)}},[a.length,p]),g.useEffect(()=>{if(l<0&&a.length>0){const n={languageId:u,[r]:""},t=[...a,n];p(t)}else l>=0&&d(`${s}.${l}.languageId`,u,{shouldDirty:!0})},[u,l,a.length,p,d,s]),g.useEffect(()=>{const n=`${s}.${I}.${r}`,t=h(n)||"";C(t)},[u,I,s,r,h]),g.useEffect(()=>{var L;const n=s.split(".");let t=m;for(const f of n)if(t=t==null?void 0:t[f],!t)return;if(!Array.isArray(t)||!t.length||!a.length)return;const e=t.findIndex(f=>f&&f[r]),o=(L=a[e])==null?void 0:L.languageId;e!==-1&&typeof o=="number"&&j(o)},[m,s,r,a]);const F=(n,t)=>{n.preventDefault(),i!==void 0&&d($,i,{shouldDirty:!0}),j(t)},b=n=>{C(n),d($,n,{shouldDirty:!0})},A=()=>{i!==void 0&&d($,i,{shouldDirty:!0})},D=n=>{const t=a.findIndex(o=>(o==null?void 0:o.languageId)===n);if(t<0)return!1;const e=h(`${s}.${t}.${r}`);return e&&e.trim().length>0},v=(()=>{const t=`${s}.${I}.${r}`.split(".");let e=m;for(const o of t){if(!e)return null;e=e[o]}return e==null?void 0:e.message})();return c.jsxs("div",{className:"space-y-3",children:[c.jsx(T,{children:E}),c.jsx(V,{selectedLanguageId:u,isLanguageFilled:D,onLanguageChange:F,showRedBorderForUnfilled:!0}),c.jsx("div",{className:`border-b ${v?"border-red-500":"border-textColor"}`,children:c.jsx(G,{name:$,value:i,onChange:n=>b(n.target.value),onBlur:A,placeholder:`enter ${E.toLowerCase()} in ${x==null?void 0:x.name}`,className:"w-full border-none leading-4 bg-transparent"})}),v&&c.jsx(T,{className:"text-red-500",children:v})]})}export{W as T};
